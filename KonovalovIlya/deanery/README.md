# 4. Деканат

## Сборка и запуск контейнера
```shell
docker build -t deanery .
docker run --rm -it -p 8080:8080 -e SET_IMPL=lazy deanery:latest
```

Переменная окружения SET_IMPL отвечает за используемую приложением реализацию множества.

Возможные значения:
- lockfree (по-умолчанию)
- lazy

## Формулировка
Деканат решил облегчить себе жизнь и заказал матмеху разработку системы, в которую преподавателями и студентами заносится информация о зачётах у последних. Вам поручено реализовать ядро этой системы, удовлетворяющей следующим критериям:
- Зачёты не дифференцированы, либо они есть, либо их нет.
- Зачёт однозначно идентифицируется парой (идентификатор_студента, идентификатор_курса). Оба идентификатора – длинные целые (64 бита) без дополнительных ограничений.
- Общее число пользователей системы – несколько тысяч.
Система должна поддерживать одновременную и непротиворечивую работу с ней нескольких пользователей.


```cs
public interface IExamSystem
{
public void Add(long studentId, long courseId); public void Remove(long studentId, long courseId); public bool Contains(long studentId, long courseId); public int Count { get; }
}
```
Предложить две различные реализации указанного интерфейса с различными подходами к организации взаимодействия между потоками. Использование библиотечных коллекций для организации конкурентного доступа не допускается. Не допускаются реализации с помощью всеобъемлющих высокоуровневых способов вроде за исключением, возможно, Count:

```cs
public void Add(long studentId, long courseId) {
lock(this) {
... }
}
```

Обернуть результат в Web API (например, с помощью соответствующей технологии ASP.NET или аналогичной) и Docker-образ.
Провести нагрузочное тестирование получившегося образа с помощью подходящих технологий исходя из следующего распределения запросов: 90% всех вызовов – Contains, 9% - Add, 1% - Remove. Каждый клиент посылает запросы один за другим сразу после окончания предыдущего. Оформить результаты отдельным файлом:
- Указать конфигурацию запуска образа.
- Построить коробчатые диаграммы (она же boxplot) распределения времени выполнения запросов каждого вида в отсутствие другой нагрузки и при двух заданных уровнях нагрузки, исчисляемых в общем количестве запросов к серверу в секунду.
- Найти число клиентов, приводящее к отказу от обслуживания по некоторому таймауту (например, 10, 30 или 60 секунд), указать хотя бы примерное количество записей в словаре в этот момент.
